<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"><head>	<title>图片轮换</title>	<meta http-equiv="Content-Type" content="text/html;charset=UTF-8" />	<style type="text/css">		#album{position:relative;border:10px solid #ccc;overflow:hidden;width:500px;height:364px;}		#album img{position:absolute;left:0;top:0;opacity:0;filter:alpha(opcity=0);}		#img1{opacity:99;filter:alpha(opacity=99);}	</style></head><body>	<div id="album">	  <img src="http://photocdn.sohu.com/20090416/Img263426838.jpg" />	  <img src="http://photocdn.sohu.com/20090416/Img263426839.jpg" />	  <img src="http://photocdn.sohu.com/20090416/Img263426843.jpg" />	  <img src="http://photocdn.sohu.com/20090416/Img263426844.jpg" />	</div>	<script type="text/javascript">		var album = function(el){			var node = (typeof el == 'string') ? document.getElementById(el) : el;			var images = node.getElementsByTagName('img');			var length = images.length;			var current = 0;			for(var i=0; i<length; i++){				images[i].opacity = 0; //为所有图片设置一个自定义属性opacity				images[i].onclick = (function(i){ //点击停顿效果					return function(){						current = i+1;						if(current > 3){							current = 3;						}					}				})(i);			}			images[0].opacity = 0.99;			(function(){				setTimeout(function(){					var cOpacity = images[current].opacity,					next = images[current+1] ? current + 1 : 0; //下一张图片的索引，如果没有就回到第一张					var nOpacity = images[next].opacity;					cOpacity -= .05;					nOpacity += .05;					images[current].opacity = cOpacity;					images[next].opacity = nOpacity;					images[next].style.display = 'block'; //确保有一张图片是可见的					setOpacity(images[current]);					setOpacity(images[next]);					if(cOpacity <= 0){						images[current].style.display = 'none';						current = next;						setTimeout(arguments.callee, 1000);					} else {						setTimeout(arguments.callee, 50);					}				}, 100);			})()		}		var setOpacity = function(obj){			if(obj.opacity > .99){				obj.opacity = .99;			}			obj.style.opacity = obj.opacity;			obj.style.filter = "alpha(opacity=" + (obj.opacity*100) + ")";		}		window.onload = function(){			var el = document.getElementById('album');			album(el);		}	</script></body></html>