<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">    <head>        <title></title>        <meta http-equiv="Content-Type" content="text/html;charset=UTF-8" />    </head>    <body>        <ul>            <li>                111            </li>            <li>                111            </li>            <li>                111            </li>            <li>                111            </li>        </ul>        <script type="text/javascript">            var lis = document.getElementsByTagName('li');            for (var i = 0; i < lis.length; i++) {                lis[i].onclick = (function(i){                    return function(){                        alert(i);                    }                })(i);            }                    </script>        <script type="text/javascript">/******************************** * autor: wkylin                    * time: 2010-08-                * link: wkylin@qq.com   * info: popup_test.js *******************************/ $(function(){	//popupLay();	// 点击“加为好友”弹出层	var id="#divpopup";	$(".clickme").click(function(){		centerPopup(id);		loadPopup(id);		popupLay();		drag(id); 	});		// 点击关闭按键关闭	$("#popupContactClose").click(function(){		disablePopup(id);	});	// 单击背景关闭	$("#backgroundPopup").click(function(){		disablePopup(id);	});});var popupStatus = 0;// 加载弹出层function loadPopup(id){	if(popupStatus==0){		//alert("loadPopup");		$("#backgroundPopup").css({			"opacity": "0.5"		});		$("#backgroundPopup").fadeIn(600);		$(id).fadeIn(600);		popupStatus = 1;	}}// 关闭弹出层function disablePopup(id){	if(popupStatus==1){		$("#backgroundPopup").fadeOut(600);		$(id).fadeOut(600);		popupStatus = 0;	}}// 设置弹出层的位置function centerPopup(id){	var windowWidth = document.documentElement.clientWidth;	var windowHeight = document.documentElement.clientHeight;	var windowScrollTop=document.documentElement.scrollTop;	var windowScrollLeft=document.documentElement.scrollLeft;	var bodyHeight=$("body").height();	var bodyWidth=$("body").width();	var popupHeight = $(id).height();	var popupWidth = $(id).width();	//alert("popupHeight:"+popupHeight+" popupWidth"+popupWidth);		//var top=windowHeight/2-popupHeight/2 + windowScrollTop;	//var left=windowWidth/2-popupWidth/2+windowScrollLeft;	//alert("top:"+ top+"left:" +left+"windowWidth"+windowWidth+"popupWidth"+popupWidth+"windowScrollLeft" +windowScrollLeft);		$(id).css({		"position": "absolute",		"top": windowHeight/2-popupHeight/2 + windowScrollTop,		"left":windowWidth/2-popupWidth/2+windowScrollLeft	});	$("#backgroundPopup").css({		//"height": windowHeight		"height": bodyHeight,		"width": bodyWidth	});	}/*	拖拽函数 2010-08-17 */function drag(id){	var drag=$(id).find(".wtop_middle").css("cursor","move");	var popup=$(id);	var wWidth = document.documentElement.clientWidth;	var dx, dy, moveout;	            drag.mousedown(function(e){                dx = e.clientX - parseInt(popup.css("left"));                dy = e.clientY - parseInt(popup.css("top"));                popup.mousemove(move).mouseout(out).css('opacity', 0.8);                drag.mouseup(up);            });			//移动            function move(e){                moveout = false;                if (e.clientX - dx < 0) {                    l = 0;                }                else                     if (e.clientX - dx > wWidth - popup.width()) {                        l = wWidth - popup.width();                    }                    else {                        l = e.clientX - dx                    }                popup.css({                    left: l,                    top: e.clientY - dy                });                            }            function out(e){                moveout = true;                setTimeout(function(){moveout && up(e);}, 10);            }            function up(e){                popup.unbind("mousemove", move).unbind("mouseout", out).css('opacity', 1);                drag.unbind("mouseup", up);            }	}/*ie6下没有执行，	用来简化弹出层样式代码*/function popupLay(){				var self_w =$(".popup_content").width();				var self_h =$(".popup_content").height();				//alert(self_w + "=======" + self_h);				$(".wtop_middle").width(self_w);				$(".wbottom_middle").width(self_w);			   	$(".wmiddle_left").height(self_h);				$(".wmiddle_right").height(self_h);				}            	        </script>    </body></html>