<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"><head>	<title></title>	<meta http-equiv="Content-Type" content="text/html;charset=UTF-8" />	<style type="text/css">		.colorpicker {display:none;position:absolute;width:216px;border:2px solid #c3c9cf;background:#f8f8f8;}		.colorpicker table{border-collapse:collapse;margin:0;padding:0;width:100%;}		.colorpicker .cell td{height:12px;width:12px;}		.colorpicker  table td {padding:0!important;}		 #color_result{width:216px;}		 #color_view{width:110px;height:25px;}	</style></head><body>	<input type="text" name="" value="点击修改颜色选择器" id="color" /><br />	<select name="" id=""><option value="">看是否能挡得住</option></select>	<script type="text/javascript">		var Class = {			create: function(){				return function(){					this.initialize.apply(this, arguments);				}			}		}		var extend = function(destination, source){			for(var property in source){				destination[property] = source[property];			}			return destination;		}		var ColorPicker = Class.create();		ColorPicker.prototype = {			initialize: function(options){				this.setOptions(options);				this.drawPicker(this.options.textfield_id);			},			setOptions: function(options){				this.options = {					id: 'colorpicker' + new Date().getTime(),					textfield: null				}				extend(this.options, options || {});			},			ID: function(id){ 				return document.getElementById(id); 			},			TN: function(tn){				return document.getElementsByTagName(tn);			},			CE: function(s){				return document.createElement(s);			},			hide: function(el){				el.style.display = 'none';			},			show: function(el){				el.style.display = 'block';			},			colorPickerHtml: function(){				var _hex = ['ff', 'cc', '99', '66', '33', '00'];				var builder = [];				//表格				var _drawCell = function(builder, red, green, blue){					builder.push('<td bgcolor="');					builder.push('#' + red + green + blue);					builder.push('" unselected="on" </td>');				};				//一行				var _drawRow = function(builder, red, blue){					builder.push('<tr>');					for(var i=0; i<6; ++i){						_drawCell(builder, red, _hex[i], blue);					}					builder.push('</tr>');				};				//六个区颜色之一				var _drawTable = function(builder, blue){					builder.push('<table class="cell" unselected="on">');					for(var i=0; i<6; ++i){						_drawRow(builder, _hex[i], blue);					}					builder.push('</table>');				};				//开始创建				builder.push('<table><tr>');				for(var i=0; i<3; ++i){					builder.push('<td>');					_drawTable(builder, _hex[i]);					builder.push('</td>');				}				builder.push('</tr><tr>');				for(var i=3; i<6; ++i){					builder.push('<td>');					_drawTable(builder, _hex[i]);					builder.push('</td>');				}				builder.push('</table></tr>');				builder.push('<table id="color_result"><tr><td id="color_view"></td><td id="color_code"></td></tr></table>');				return builder.join('');			},			addEvent: function(el, type, fn){				if(document.attachEvent){					el['e' + type + fn] = fn;					el.attachEvent('on' + type, function(){						el['e' + type + fn]();					});				} else {					el.addEventListener(type, fn, false);				}			},			drawPicker: function(id){				var $ = this,				textfield = $.ID(id),				colorPicker = $.CE('div');				colorPicker.className = 'colorpicker';				colorPicker.innerHTML = $.colorPickerHtml();				textfield.parentNode.insertBefore(colorPicker, null);				$.hide(colorPicker);				$.addEvent(textfield, 'focus', function(){					textfield.style.position = 'relative';					$.show(colorPicker);					var l = textfield.offsetLeft + 'px',					t = (textfield.clientHeight + textfield.offsetTop) + 'px';					colorPicker.style.left = l;					colorPicker.style.top = t;				});				$.addEvent(colorPicker, 'mouseover', function(){					var e = arguments[0] || window.event,					td = e.srcElement ? e.srcElement : e.target,					nn = td.nodeName.toLowerCase(),					colorView = $.ID('color_view'),					colorCode = $.ID('color_code');					if('td' == nn){						colorView.style.backgroundColor = td.bgColor;						!-[1,] ? (colorCode.innerText = td.bgColor) : (colorCode.innerHTML = td.bgColor);					}				});				$.addEvent(colorPicker, 'click', function(){					var e = arguments[0] || window.event,					td = e.srcElement ? e.srcElement : e.target,					nn = td.nodeName.toLowerCase();					if('td' == nn){						textfield.value = td.bgColor;						$.hide(colorPicker);						var iframe = $.ID('picker_mask');						iframe && iframe.parentNode.removeChild(iframe);					}				});							}		}		var getTarget = function(event){			event = event || window.event;			var obj = event.target ? event.target : event.srcElement;			return obj;		}		var bindMouseover = function(obj){			addEvent(obj, 'mouseover', function(e){				var td = getTarget(e),				nn = td.nodename.toLowerCase(),				colorView,				colorCode;				if(document.querySelector){					colorView = obj.querySelector('td.color_view');					colorCode = obj.querySelector('td.color_code');				} else {					colorView = getElementsByClassName('color_view', obj, 'td')[0]					colorCode = getElementsByClassName('color_code', obj, 'td')[0]				}				if(nn == 'td'){					colorView.style.backgroundColor = td.bgColor;					colorCode.innerHTML = td.bgColor;				}			});		}				window.onload = function(){			new ColorPicker({textfield_id: 'color'});		}	</script></body></html>