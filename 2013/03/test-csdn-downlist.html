<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
    <meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/>
    <title>test</title>
    <style type="text/css">
        *{ margin:0; padding:0;}
        body{font:12px/1.125 Arial,Helvetica,sans-serif;background:#fff;}
        table{border-collapse:collapse;border-spacing:0;}
        li{list-style:none;}
        fieldset,img{border:0;}
        article,aside,details,figcaption,figure,footer,header,hgroup,menu,nav,section{display:block}
        q:before,q:after{content:'';}
        a:focus,input,textarea{outline-style:none;}
        input[type="text"],input[type="password"],textarea{outline-style:none;-webkit-appearance:none;}
        textarea{resize:none}
        address,caption,cite,code,dfn,em,i,th,var{font-style:normal;font-weight:normal;}
        legend{color:#000;}
        abbr,acronym{border:0;font-variant:normal;}
        a{color:#333;text-decoration:none;}
        a:hover{text-decoration:underline;}
        .clearfix:after{content:".";display:block;height:0;clear:both;visibility:hidden;}
        .clearfix{display:inline-block;}
        .clearfix{display:block;}
        .clear{clear:both;height:0;font:0/0 Arial;visibility:hidden;}
        .none{display:none}
        .demo{ width:550px;margin:50px auto;}
        .input{width:543px; height:30px; line-height:30px; padding:3px 0 3px 5px; border:1px solid #ccc;background:#fff;}
        .demo .hover{ display:block;}
        .list{ border:1px solid #817f82;background:#fff; display:none;}
        .list li{width:548px; text-indent:1em;}
        .list li.cur a{background:#ebebeb; text-decoration:none;}
        .list a{ display:block; height:28px; line-height:28px;}
        /*.list a:hover,.list a.cur{background:#ebebeb; text-decoration:none;}*/
    </style>
</head>
<body>
<div class="demo">
    <input class="input" type="text" name="" id="input">
    <ul id="list" class="list">
        <li><a href="#">sina</a></li>
        <li><a href="#">sohu</a></li>
        <li><a href="#">邮箱</a></li>
        <li><a href="#">微博</a></li>
    </ul>
</div>
<script type="text/javascript">
    function id(){
        return document.getElementById(arguments[0]);
    }
    (function(window){
        var input = id('input'),
            list = id('list'),
            oA = list.getElementsByTagName('li'),
            timer = 0;

        input.onclick = function(){
            list.className = 'list hover';
        }

        for(var i = 0; i < oA.length; i++){
            oA[i].className = '';
            oA[i].onmouseover = function(){
                this.className = 'cur';
            }
            oA[i].onmouseout = function(){
                this.className = '';
            }
        }

        document.documentElement.onclick = function(e){
            e = e ? e.target : window.event.srcElement;
            if(e.tagName == 'BODY' || e.tagName == 'HTML'){
                list.className = 'list';
            }
        }

        document.documentElement.onkeydown = function(e){
            e = e || window.event;
            var target = e.target || e.srcElement,
                kcode = 0,
                index = getItems();

            console.log(index);
            if(target.tagName == 'INPUT'){
                kcode = e.keyCode;
                switch(kcode){
                    case 13 :
                        break;
                    case 38 : // up
                        if(index > 0){

                            // setItems(index, 0);
                        }
                        //selectItems(0);
//                        console.log(111);
                        break;
                    case 40 : // down
                        if(index <= oA.length){

                            // setItems(index, 1);
                        }
                        //selectItems(1);
                        break;
                }
                hover(oA[index + 1]);
            }
        }

        function getItems(){
            for(var i = 0; i < oA.length; i++){
                if(oA[i].className == 'cur'){
                    console.log(oA[i]);
                    return i;
                } else {
                    console.log('zero');
                    return 0;
                }
            }
        }

        function setItems(pos, direction){
            if(direction == 0){
                oA[pos].className = 'cur';
            } else {
                oA[pos].className = 'cur';
            }
        }

        function hover(obj){
            for(var i = 0; i < oA.length; i++){
                var items = oA[i];
                if(items.className == 'cur'){
                    items.className = '';
                }
            }
            obj.className = 'cur';
        }

    }(window));

</script>
</body>
</html>