<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8"/>
    <title>test</title>
    <script type="text/javascript" src="../jquery-1.8.3.min.js"></script>
</head>
<body>
<div id="div"></div>
<ul>
    <li>1111</li>
</ul>
<table width="10">

</table>
<input id="btn" type="button" value="test-button"/>l
<script type="text/javascript">
    function setDrag(handler){
        var me      = this,
                startX  = 0,
                startY  = 0,
                lastX   = 0,
                lastY   = 0,
                box     = this.ele, // handler.parentNode
                width   = viewSize.width,
                height  = viewSize.height,
                drag    = {
                    down: function(e){
                        e                    = hogo.getEvent(e);
                        handler.style.cursor = 'move';
                        startX               = e.clientX - parseInt(box.style.left);
                        startY               = e.clientY - parseInt(box.style.top);
                        this.setCapture && this.setCapture(); // IE 下防止拖动过快丢失对象
                        addEvent(document, 'mousemove', drag.move);
                        addEvent(document, 'mouseup', drag.up);
                        return false; // 防止在 chrome 下滚屏，并丢失 cursor:move 样式
                    },
                    move: function(e){
                        e                 = hogo.getEvent(e);
                        stopPropagation(e);
                        lastX             = e.clientX - startX;
                        lastY             = e.clientY - startY;
                        lastX             = Math.max(0, Math.min(width - box.clientWidth - 19, lastX));
                        lastY             = Math.max(0, Math.min(height - box.clientHeight - 2, lastY));
                        box.style.top     = lastY + 'px';
                        box.style.left    = lastX + 'px';
                        window.getSelection ? window.getSelection().removeAllRanges() : document.selection.empty(); // 取消选择文本
                    },
                    up: function(){
                        handler.style.cursor = 'auto';
                        removeEvent(document, 'mousemove', drag.move);
                        removeEvent(document, 'mouseup', drag.up);
                        handler.releaseCapture && handler.releaseCapture(); // 防止拖动过快丢失对象
                    }
                };
        addEvent(handler, 'mousedown', drag.down);
    }

</script>
</body>
</html>