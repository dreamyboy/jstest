<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8"/>
    <title>test</title>
    <script type="text/javascript" src="ajax.js"></script>
</head>
<body>
<input id="btn" type="button" value="test"/>
<script type="text/javascript">
    var btn = document.getElementById('btn')
    btn.onclick = function(){
        var a = ajax('a.txt', function(str){
            alert(str);
        });
    }

    function ajax(url, success, fail){
        // 1. 创建连接
        var xhr = null;
        if(window.XMLHttpRequest){
            xhr = new XMLHttpRequest()
        } else {
            xhr = new ActiveXObject('Microsoft.XMLHTTP');
        }

        // 2. 连接服务器
        xhr.open('get', url, true)

        // 3. 发送请求
        xhr.send(null);

        // 4. 接受请求
        xhr.onreadystatechange = function(){
            if(xhr.readyState == 4){
                if(xhr.status == 200){
                    success(xhr.responseText);
                } else { // fail
                    fail && fail(xhr.status);
                }
            }
        }

    }
</script>
</body>
</html>